% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DataClasses.R, R/functions-Params.R, R/methods-Params.R, R/methods-XCMSnExp.R
\docType{class}
\name{groupFeatures-density}
\alias{FeatureDensityParam}
\alias{FeatureDensityParam-class}
\alias{binSize,FeatureDensityParam-method}
\alias{binSize<-,FeatureDensityParam-method}
\alias{bw}
\alias{bw,FeatureDensityParam-method}
\alias{bw<-}
\alias{bw<-,FeatureDensityParam-method}
\alias{groupFeatures,XCMSnExp,FeatureDensityParam-method}
\alias{groupFeatures-density}
\alias{maxFeatures}
\alias{maxFeatures,FeatureDensityParam-method}
\alias{maxFeatures<-}
\alias{maxFeatures<-,FeatureDensityParam-method}
\alias{minFraction}
\alias{minFraction,FeatureDensityParam-method}
\alias{minFraction<-}
\alias{minFraction<-,FeatureDensityParam-method}
\alias{minSamples}
\alias{minSamples,FeatureDensityParam-method}
\alias{minSamples<-}
\alias{minSamples<-,FeatureDensityParam-method}
\alias{sampleGroups}
\alias{sampleGroups,FeatureDensityParam-method}
\alias{sampleGroups<-}
\alias{sampleGroups<-,FeatureDensityParam-method}
\alias{show,FeatureDensityParam-method}
\title{Feature alignment based on time dimension feature densities}
\usage{
FeatureDensityParam(sampleGroups = numeric(), bw = 30, minFraction = 0.5,
  minSamples = 1, binSize = 0.25, maxFeatures = 50)

\S4method{show}{FeatureDensityParam}(object)

\S4method{sampleGroups}{FeatureDensityParam}(object)

\S4method{sampleGroups}{FeatureDensityParam}(object) <- value

\S4method{bw}{FeatureDensityParam}(object)

\S4method{bw}{FeatureDensityParam}(object) <- value

\S4method{minFraction}{FeatureDensityParam}(object)

\S4method{minFraction}{FeatureDensityParam}(object) <- value

\S4method{minSamples}{FeatureDensityParam}(object)

\S4method{minSamples}{FeatureDensityParam}(object) <- value

\S4method{binSize}{FeatureDensityParam}(object)

\S4method{binSize}{FeatureDensityParam}(object) <- value

\S4method{maxFeatures}{FeatureDensityParam}(object)

\S4method{maxFeatures}{FeatureDensityParam}(object) <- value

\S4method{groupFeatures}{XCMSnExp,FeatureDensityParam}(object, param)
}
\arguments{
\item{sampleGroups}{A vector of the same length than samples defining the
sample group assignments.}

\item{bw}{numeric(1) defining the bandwidth (standard deviation ot the
smoothing kernel) to be used. This argument is passed to the
\code{\link{density}} method.}

\item{minFraction}{numeric(1) defining the minimum fraction of samples in at
least one sample group in which the features have to be present to be
considered as a feature group.}

\item{minSamples}{numeric(1) with the minimum number of samples in at least
one sample group in which the features have to be detected to be considered
as a feature group.}

\item{binSize}{numeric(1) defining the size of the overlapping slices in mz
dimension.}

\item{maxFeatures}{numeric(1) with the maximum number of feature groups to
be identified in a single mz slice.}

\item{object}{For \code{groupFeatures}: an \code{\link{XCMSnExp}} object
containing the results from a previous feature detection analysis (see
\code{\link{detectFeatures}}).

For all other methods: a \code{FeatureDensityParam} object.}

\item{value}{The value for the slot.}

\item{param}{A \code{FeatureDensityParam} object containing all settings for
the feature alignment algorithm.}
}
\value{
The \code{FeatureDensityParam} function returns a
\code{FeatureDensityParam} class instance with all of the settings
specified for feature alignment based on feature densities.

For \code{detectFeatures}: a \code{\link{XCMSnExp}} object with the
results of the feature alignment step. These can be accessed with the
\code{\link{featureGroups}} method.
}
\description{
This method performs performs feature alignment based on the
density (distribution) of identified features along the retention time axis
within slices of overlapping mz ranges. All features (from the same or from
different samples) being close on the retention time axis are grouped into
a \emph{feature group}.

The \code{FeatureDensityParam} class allows to specify all
settings for the feature alignment based on feature densities along the time
dimension. Instances should be created with the \code{FeatureDensityParam}
constructor.

\code{sampleGroups},\code{sampleGroups<-}: getter and setter
for the \code{sampleGroups} slot of the object.

\code{bw},\code{bw<-}: getter and setter for the \code{bw} slot
of the object.

\code{minFraction},\code{minFraction<-}: getter and setter for
the \code{minFraction} slot of the object.

\code{minSamples},\code{minSamples<-}: getter and setter for the
\code{minSamples} slot of the object.

\code{binSize},\code{binSize<-}: getter and setter for the
\code{binSize} slot of the object.

\code{maxFeatures},\code{maxFeatures<-}: getter and setter for
the \code{maxFeatures} slot of the object.

The \code{groupFeatures,XCMSnExp,FeatureDensityParam} method
performs feature alignment (within and across samples) within in mz dimension
overlapping slices of MS data based on the density distribution of the
identified features in the slice along the time axis.
}
\section{Slots}{

\describe{
\item{\code{.__classVersion__,sampleGroups,bw,minFraction,minSamples,binSize,maxFeatures}}{See corresponding parameter above. \code{.__classVersion__} stores
the version from the class. Slots values should exclusively be accessed
\emph{via} the corresponding getter and setter methods listed above.}
}}
\note{
These methods and classes are part of the updated and modernized
\code{xcms} user interface which will eventually replace the
\code{\link{group}} methods. All of the settings to the alignment algorithm
can be passed with a \code{FeatureDensityParam} object.

Calling \code{groupFeatures} on an \code{XCMSnExp} object will cause
all eventually present previous alignment results to be dropped.
}
\examples{

## Create a FeatureDensityParam object
p <- FeatureDensityParam(binSize = 0.05)
## Change hte minSamples slot
minSamples(p) <- 3
p

##############################
## feature detection and alignment.
##
## Below we perform first a feature detection (using the matchedFilter
## method) on some of the test files from the faahKO package followed by
## a feature alignment using the density method.
library(faahKO)
library(MSnbase)
fls <- dir(system.file("cdf/KO", package = "faahKO"), recursive = TRUE,
           full.names = TRUE)

## Reading 2 of the KO samples
raw_data <- readMSData2(fls[1:2])

## Perform the feature detection using the matchedFilter method.
mfp <- MatchedFilterParam(snthresh = 20, binSize = 1)
res <- detectFeatures(raw_data, param = mfp)

head(features(res))
## The number of features identified per sample:
table(features(res)[, "sample"])

## Performing the feature alignment
fdp <- FeatureDensityParam()
res <- groupFeatures(res, fdp)

## The results from the feature alignment:
featureGroups(res)

## The process history:
processHistory(res)
}
\author{
Colin Smith, Johannes Rainer
}
\references{
Colin A. Smith, Elizabeth J. Want, Grace O'Maille, Ruben Abagyan and
Gary Siuzdak. "XCMS: Processing Mass Spectrometry Data for Metabolite
Profiling Using Nonlinear Peak Alignment, Matching, and Identification"
\emph{Anal. Chem.} 2006, 78:779-787.
}
\seealso{
The \code{\link{do_groupFeatures_density}} core
API function and \code{\link{group.density}} for the old user interface.

\code{\link{XCMSnExp}} for the object containing the results of
the feature alignment.

Other feature alignment methods: \code{\link{groupFeatures}}
}

